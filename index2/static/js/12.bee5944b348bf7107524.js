webpackJsonp([12],{PgVU:function(n,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"page"},[e("h3",[this._v("使用前准备")]),this._v(" "),e("pre",[this._v("  为了让psycopg2兼容python3 下载二进制的psycopg2包\n  pip install -U pip\n  pip install psycopg2\n        ")]),this._v(" "),e("h3",[this._v("使用psycopg2包 另外还要install psycopg2-binary")]),this._v(" "),e("pre",[this._v("#!/usr/bin/python3\n# -*- coding:utf-8 -*-\nimport psycopg2.extras\n\ndef downloadOne(file_name,start_position,bigfile_size,bigfile_name,url,file_size):\n    print(file_name,start_position,bigfile_size,url,file_size)\n    f = open(file_name, 'wb') # 二进制 读写 覆盖式\n    bigFile = open(bigfile_name,'rb') # 只读\n    bigFile.seek(start_position,0)\n    position = bigFile.tell()\n    img= bigFile.read(file_size)\n    f.write(img)\n    f.close()\n    bigFile.close()\n\ndef download(filename):\n    conn = psycopg2.connect(database=\"filedb\", user=\"postgres\", password=\"postgres\", host=\"10.10.92.233\", port=\"5432\")\n    cursor = conn.cursor(cursor_factory=psycopg2.extras.DictCursor)\n    sql = \"select * from file_info2 WHERE file_name = \\'%s\\'\"%(filename)\n    cursor.execute(sql)\n    answer = cursor.fetchone()\n    if answer == None :\n        print('不存在该数据')\n    elif answer != None :\n        id = answer[0]\n        file_name = answer[1]\n        file_size = answer[2]\n        bigfile_name = answer[3]\n        bigfile_size = answer[4]\n        start_position = answer[5]\n        end_position = answer[6]\n        url = answer[7]\n        root_url = answer[8]\n        try:\n            f = open(bigfile_name, 'r')\n            f.close()\n            downloadOne(file_name,start_position,bigfile_size,bigfile_name,url,file_size)\n        except:\n            print('当前目录缺少%s文件,请确认'%(bigfile_name))\n\n    conn.commit()\n    conn.close()\n\nif __name__ == \"__main__\":\n    download('qt=tile&x=0&y=-2&z=4&styles=pl&scaler=1&udt=20180131.png')\n        ")])])}]};var t=i("Z0/y")({name:"postgresql",data:function(){return{msg:"postgresql"}}},s,!1,function(n){i("qw4F")},"data-v-28ae82aa",null);e.default=t.exports},qw4F:function(n,e){}});
//# sourceMappingURL=12.bee5944b348bf7107524.js.map